var C=(w=0)=>(x)=>`\x1B[${x+w}m`,S=(w=0)=>(x)=>`\x1B[${38+w};5;${x}m`,_=(w=0)=>(x,Q,V)=>`\x1B[${38+w};2;${x};${Q};${V}m`,D={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},J0=Object.keys(D.modifier),a=Object.keys(D.color),o=Object.keys(D.bgColor),O0=[...a,...o];function t(){let w=new Map;for(let[x,Q]of Object.entries(D)){for(let[V,q]of Object.entries(Q))D[V]={open:`\x1B[${q[0]}m`,close:`\x1B[${q[1]}m`},Q[V]=D[V],w.set(q[0],q[1]);Object.defineProperty(D,x,{value:Q,enumerable:!1})}return Object.defineProperty(D,"codes",{value:w,enumerable:!1}),D.color.close="\x1B[39m",D.bgColor.close="\x1B[49m",D.color.ansi=C(),D.color.ansi256=S(),D.color.ansi16m=_(),D.bgColor.ansi=C(10),D.bgColor.ansi256=S(10),D.bgColor.ansi16m=_(10),Object.defineProperties(D,{rgbToAnsi256:{value(x,Q,V){if(x===Q&&Q===V){if(x<8)return 16;if(x>248)return 231;return Math.round((x-8)/247*24)+232}return 16+36*Math.round(x/255*5)+6*Math.round(Q/255*5)+Math.round(V/255*5)},enumerable:!1},hexToRgb:{value(x){let Q=/[a-f\d]{6}|[a-f\d]{3}/i.exec(x.toString(16));if(!Q)return[0,0,0];let[V]=Q;if(V.length===3)V=[...V].map((W)=>W+W).join("");let q=Number.parseInt(V,16);return[q>>16&255,q>>8&255,q&255]},enumerable:!1},hexToAnsi256:{value:(x)=>D.rgbToAnsi256(...D.hexToRgb(x)),enumerable:!1},ansi256ToAnsi:{value(x){if(x<8)return 30+x;if(x<16)return 90+(x-8);let Q,V,q;if(x>=232)Q=((x-232)*10+8)/255,V=Q,q=Q;else{x-=16;let F=x%36;Q=Math.floor(x/36)/5,V=Math.floor(F/6)/5,q=F%6/5}let W=Math.max(Q,V,q)*2;if(W===0)return 30;let $=30+(Math.round(q)<<2|Math.round(V)<<1|Math.round(Q));if(W===2)$+=60;return $},enumerable:!1},rgbToAnsi:{value:(x,Q,V)=>D.ansi256ToAnsi(D.rgbToAnsi256(x,Q,V)),enumerable:!1},hexToAnsi:{value:(x)=>D.ansi256ToAnsi(D.hexToAnsi256(x)),enumerable:!1}}),D}var r=t(),H=r;import E from"node:process";import l from"node:os";import b from"node:tty";function z(w,x=globalThis.Deno?globalThis.Deno.args:E.argv){let Q=w.startsWith("-")?"":w.length===1?"-":"--",V=x.indexOf(Q+w),q=x.indexOf("--");return V!==-1&&(q===-1||V<q)}var{env:K}=E,f;if(z("no-color")||z("no-colors")||z("color=false")||z("color=never"))f=0;else if(z("color")||z("colors")||z("color=true")||z("color=always"))f=1;function s(){if("FORCE_COLOR"in K){if(K.FORCE_COLOR==="true")return 1;if(K.FORCE_COLOR==="false")return 0;return K.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(K.FORCE_COLOR,10),3)}}function e(w){if(w===0)return!1;return{level:w,hasBasic:!0,has256:w>=2,has16m:w>=3}}function x0(w,{streamIsTTY:x,sniffFlags:Q=!0}={}){let V=s();if(V!==void 0)f=V;let q=Q?f:V;if(q===0)return 0;if(Q){if(z("color=16m")||z("color=full")||z("color=truecolor"))return 3;if(z("color=256"))return 2}if("TF_BUILD"in K&&"AGENT_NAME"in K)return 1;if(w&&!x&&q===void 0)return 0;let W=q||0;if(K.TERM==="dumb")return W;if(E.platform==="win32"){let $=l.release().split(".");if(Number($[0])>=10&&Number($[2])>=10586)return Number($[2])>=14931?3:2;return 1}if("CI"in K){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(($)=>($ in K)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(($)=>($ in K))||K.CI_NAME==="codeship")return 1;return W}if("TEAMCITY_VERSION"in K)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(K.TEAMCITY_VERSION)?1:0;if(K.COLORTERM==="truecolor")return 3;if(K.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in K){let $=Number.parseInt((K.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(K.TERM_PROGRAM){case"iTerm.app":return $>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(K.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(K.TERM))return 1;if("COLORTERM"in K)return 1;return W}function u(w,x={}){let Q=x0(w,{streamIsTTY:w&&w.isTTY,...x});return e(Q)}var w0={stdout:u({isTTY:b.isatty(1)}),stderr:u({isTTY:b.isatty(2)})},m=w0;function c(w,x,Q){let V=w.indexOf(x);if(V===-1)return w;let q=x.length,W=0,$="";do $+=w.slice(W,V)+x+Q,W=V+q,V=w.indexOf(x,W);while(V!==-1);return $+=w.slice(W),$}function v(w,x,Q,V){let q=0,W="";do{let $=w[V-1]==="\r";W+=w.slice(q,$?V-1:V)+x+($?`\r
`:`
`)+Q,q=V+1,V=w.indexOf(`
`,q)}while(V!==-1);return W+=w.slice(q),W}var{stdout:p,stderr:d}=m,T=Symbol("GENERATOR"),X=Symbol("STYLER"),G=Symbol("IS_EMPTY"),y=["ansi","ansi","ansi256","ansi16m"],Z=Object.create(null),Q0=(w,x={})=>{if(x.level&&!(Number.isInteger(x.level)&&x.level>=0&&x.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let Q=p?p.level:0;w.level=x.level===void 0?Q:x.level};var V0=(w)=>{let x=(...Q)=>Q.join(" ");return Q0(x,w),Object.setPrototypeOf(x,M.prototype),x};function M(w){return V0(w)}Object.setPrototypeOf(M.prototype,Function.prototype);for(let[w,x]of Object.entries(H))Z[w]={get(){let Q=I(this,k(x.open,x.close,this[X]),this[G]);return Object.defineProperty(this,w,{value:Q}),Q}};Z.visible={get(){let w=I(this,this[X],!0);return Object.defineProperty(this,"visible",{value:w}),w}};var A=(w,x,Q,...V)=>{if(w==="rgb"){if(x==="ansi16m")return H[Q].ansi16m(...V);if(x==="ansi256")return H[Q].ansi256(H.rgbToAnsi256(...V));return H[Q].ansi(H.rgbToAnsi(...V))}if(w==="hex")return A("rgb",x,Q,...H.hexToRgb(...V));return H[Q][w](...V)},q0=["rgb","hex","ansi256"];for(let w of q0){Z[w]={get(){let{level:Q}=this;return function(...V){let q=k(A(w,y[Q],"color",...V),H.color.close,this[X]);return I(this,q,this[G])}}};let x="bg"+w[0].toUpperCase()+w.slice(1);Z[x]={get(){let{level:Q}=this;return function(...V){let q=k(A(w,y[Q],"bgColor",...V),H.bgColor.close,this[X]);return I(this,q,this[G])}}}}var D0=Object.defineProperties(()=>{},{...Z,level:{enumerable:!0,get(){return this[T].level},set(w){this[T].level=w}}}),k=(w,x,Q)=>{let V,q;if(Q===void 0)V=w,q=x;else V=Q.openAll+w,q=x+Q.closeAll;return{open:w,close:x,openAll:V,closeAll:q,parent:Q}},I=(w,x,Q)=>{let V=(...q)=>K0(V,q.length===1?""+q[0]:q.join(" "));return Object.setPrototypeOf(V,D0),V[T]=w,V[X]=x,V[G]=Q,V},K0=(w,x)=>{if(w.level<=0||!x)return w[G]?"":x;let Q=w[X];if(Q===void 0)return x;let{openAll:V,closeAll:q}=Q;if(x.includes("\x1B"))while(Q!==void 0)x=c(x,Q.close,Q.open),Q=Q.parent;let W=x.indexOf(`
`);if(W!==-1)x=v(x,q,V,W);return V+x+q};Object.defineProperties(M.prototype,Z);var W0=M(),I0=M({level:d?d.level:0});var j=W0;import i from"readline";import{stdout as N}from"process";import{console as R}from"inspector/promises";var O=Math.floor(N.columns/2)-6,P=N.rows-8,U=[{x:Math.floor(O/2),y:Math.floor(P/2)}],J={x:1,y:0},$0=!0,Y=!1,h=0,L=!0;function g(){return{x:Math.floor(Math.random()*(O-4))+2,y:Math.floor(Math.random()*(P-4))+2}}var B=g(),T0=i.createInterface({input:process.stdin,output:process.stdout});i.emitKeypressEvents(process.stdin);process.stdin.setRawMode(!0);process.stdin.on("keypress",(w,x)=>{if((x.name==="left"||x.name==="a")&&J.x===0)J={x:-1,y:0};if((x.name==="right"||x.name==="d")&&J.x===0)J={x:1,y:0};if((x.name==="up"||x.name==="w")&&J.y===0)J={x:0,y:-1};if((x.name==="down"||x.name==="s")&&J.y===0)J={x:0,y:1};if(x.name==="p"||x.name==="space")Y=!Y;if(x.name==="q")process.exit()});function z0(){let w=`
`;w+="  ┌"+"─".repeat(O*2+2)+`┐
`,w+="  │"+" ".repeat(O*2+2)+`│
`;for(let x=0;x<P;x++){w+="  │ ";for(let Q=0;Q<O;Q++)if(Q===B.x&&x===B.y)w+=j.red("■ ");else if(U[0].x===Q&&U[0].y===x)w+=L?j.green("■ "):"  ";else if(U.some((V)=>V.x===Q&&V.y===x))w+=j.green("■ ");else w+="  ";w+=` │
`}w+="  │"+" ".repeat(O*2+2)+`│
`,w+="  └"+"─".repeat(O*2+2)+`┘
`,w+=`  Score: ${h}  [WASD / Arrows: Move] [Space/P: Pause] [Q: Quit]
`,R.clear(),R.log(w)}function H0(){if(Y)return;let w={x:U[0].x+J.x,y:U[0].y+J.y};if(w.x<0||w.x>=O||w.y<0||w.y>=P||U.some((x)=>x.x===w.x&&x.y===w.y))R.clear(),R.log(j.red("Game Over! Final Score: "+h)),process.exit();if(U.unshift(w),w.x===B.x&&w.y===B.y)B=g(),h++;else U.pop()}function n(){if(!$0)return;if(O=Math.floor(N.columns/2)-6,P=N.rows-8,Y)L=!L;else L=!0;H0(),z0(),setTimeout(n,300)}n();
